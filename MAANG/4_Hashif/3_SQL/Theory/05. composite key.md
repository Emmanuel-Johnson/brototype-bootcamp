## 1. What is it?

A **composite key** (also called a compound key) is a primary key made up of two or more columns in a table. Instead of a single column uniquely identifying each row, the combination of multiple columns together enforces uniqueness.

## 2. Why it matters

Sometimes a single column isn’t enough to uniquely identify a record. For example, in a many-to-many relationship table, neither column alone is unique, but together they must be. Composite keys guarantee data integrity by preventing duplicates on that combination.

## 3. How it works

You define a primary key constraint on multiple columns during table creation or alteration. PostgreSQL enforces uniqueness on the combination of these columns. It acts as the main unique identifier for rows in that table.

**Example SQL to create a composite primary key:**

```sql
CREATE TABLE order_items (
    order_id INT,
    product_id INT,
    quantity INT,
    PRIMARY KEY (order_id, product_id)
);
```

Here, neither `order_id` nor `product_id` alone can uniquely identify a row, but together they do.

## 4. When to use it

- When your table represents a relationship that naturally requires multiple attributes to uniquely identify records (like junction tables).
- When no single column can be a reliable primary key but the combination can.
- To enforce uniqueness on sets of columns without adding a synthetic ID.

> ⚡ If you want simpler foreign keys or easier joins, sometimes adding a surrogate key (like a serial id) is more practical.

## 5. Pros and Cons

**Pros**

- ✅ Enforces real-world uniqueness without extra columns.
- ✅ Perfect for many-to-many join tables or composite identifiers.
- ✅ No unnecessary surrogate keys cluttering your schema.

**Cons**

- ❌ Can complicate foreign key relationships referencing this table (you have to reference all key columns).
- ❌ Can make queries longer and more complex because you always deal with multiple columns as keys.
- ❌ Indexes on multiple columns can be less performant than single-column keys in some cases.

---

## 🧠 Interview Explanation

A composite key in PostgreSQL is a primary key made from two or more columns combined to enforce uniqueness when a single column can’t uniquely identify a record. It’s commonly used in many-to-many relationship tables—like order items—where neither column alone is unique but together they guarantee data integrity. You define it using a primary key constraint on multiple columns during table creation. While composite keys avoid unnecessary surrogate keys and reflect real-world uniqueness, they can complicate foreign key references and make queries longer since you always deal with multiple columns as identifiers. Despite some complexity, they’re essential when the unique identity depends on a combination of attributes.
